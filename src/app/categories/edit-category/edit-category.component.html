<div *ngIf="updateSuccess !== null" class="alert alert-dismissable"
     [ngClass]="{'alert-success': updateSuccess, 'alert-danger': !updateSuccess}">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
    Category update {{ updateSuccess ? 'succeeded' : 'failed' }}.
</div>

<form role="form" #categoryNameForm="ngForm" (submit)="onSubmit()">
    <fieldset>
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" name="name" id="name" class="form-control category__name" placeholder="Name" min="1" max="50" tabindex="1"
                   autofocus (input)="onInputCategoryName($event)" [(ngModel)]="categoryName" required>
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-primary" tabindex="2" [disabled]="categoryNameSubmitDisabled">Submit</button>
        </div>
    </fieldset>
</form>

<p class="category__created-at">Created: {{ (category$ | async)?.created_at }}</p>
<p class="category__updated-at">Updated: {{ (category$ | async)?.updated_at }}</p>

<hr>
<h3>Subcategories</h3>
<div class="table-responsive">
    <table class="table table-striped table-bordered table-hover">
        <thead>
        <tr>
            <th>id</th>
            <th>Name</th>
            <th>Created</th>
            <th>Updated</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr class="subcategory" *ngFor="let subcategory of (category$ | async)?.subcategories?.records">
            <td class="subcategory__id">{{ subcategory?.id }}</td>
            <td class="subcategory__name">{{ subcategory?.name }}</td>
            <td class="subcategory__created-at">{{ subcategory?.created_at }}</td>
            <td class="subcategory__updated-at">{{ subcategory?.updated_at }}</td>
            <td>
                <a class="btn btn-xs btn-default" [routerLink]="['/categories', categoryId, 'subcategories', subcategory?.id]">Edit</a>
                <button class="btn btn-xs btn-danger">Delete</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>